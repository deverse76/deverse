<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>–ù–æ–≤–æ—Å—Ç–∏ –í–ö</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .header {
            text-align: center;
            padding: 20px;
            background-color: #4a76a8;
            color: white;
            border-radius: 5px;
            margin-bottom: 20px;
        }
        
        .post {
            background: white;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 15px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        
        .post-text {
            margin-bottom: 10px;
            line-height: 1.5;
        }
        
        .post-date {
            color: #666;
            font-size: 14px;
            border-top: 1px solid #eee;
            padding-top: 10px;
        }
        
        .post-image {
            max-width: 100%;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }
        
        .error {
            background: #ffebee;
            padding: 15px;
            border-radius: 5px;
            color: #c62828;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>–ù–æ–≤–æ—Å—Ç–∏ –∏–∑ –í–ö–æ–Ω—Ç–∞–∫—Ç–µ</h1>
        <p>–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏ —Å–æ–æ–±—â–µ—Å—Ç–≤–∞</p>
    </div>
    
    <div id="news"></div>
    
    <script>
        // –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
        const token = 'vk1.a.402owRXdquHzJCByvDe-pCojSImll6xQ5HjjFVV2VFHwItdb9oXh9yi-MkLSsGNa3otQj5YzSMgAGeaq4-L3n-bS3Hgtft8Hlep-OWzRs_RTSFWI6QAQaku_wGcP0928-KRSZOF3Qywww6lOVmf0VbnT4rM5urBQS6L87lIo3N0tmh6yhbRQ32GaX0MnjKOIMAvmcx34oq1f5vngG4YB1A';
        const groupId = '-233768802'; // ID –≥—Ä—É–ø–ø—ã —Å –º–∏–Ω—É—Å–æ–º
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–æ–≤–æ—Å—Ç–µ–π
        async function loadNews() {
            const container = document.getElementById('news');
            container.innerHTML = '<div class="loading">–ó–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤–æ—Å—Ç–µ–π...</div>';
            
            try {
                // –î–µ–ª–∞–µ–º –∑–∞–ø—Ä–æ—Å –∫ VK API
                const response = await fetch(
                    `https://api.vk.com/method/wall.get?` +
                    `owner_id=${groupId}&` +
                    `count=20&` +
                    `access_token=${token}&` +
                    `v=5.199`
                );
                
                const data = await response.json();
                
                // –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—à–∏–±–∫–∏
                if (data.error) {
                    throw new Error(`–û—à–∏–±–∫–∞ VK: ${data.error.error_msg}`);
                }
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏
                showNews(data.response.items);
                
            } catch (error) {
                container.innerHTML = `
                    <div class="error">
                        <strong>–û—à–∏–±–∫–∞:</strong> ${error.message}<br>
                        <small>–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –æ–±–Ω–æ–≤–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É</small>
                    </div>
                `;
                console.error(error);
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –Ω–æ–≤–æ—Å—Ç–µ–π
        function showNews(posts) {
            const container = document.getElementById('news');
            
            if (!posts || posts.length === 0) {
                container.innerHTML = '<div class="error">–ù–µ—Ç –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –Ω–æ–≤–æ—Å—Ç–µ–π</div>';
                return;
            }
            
            let html = '';
            
            posts.forEach(post => {
                // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º —Ä–µ–∫–ª–∞–º—É –∏ –ø—É—Å—Ç—ã–µ –ø–æ—Å—Ç—ã
                if (post.marked_as_ads || (!post.text && !post.attachments)) return;
                
                let postText = post.text || '';
                let imageUrl = '';
                
                // –ò—â–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É –≤ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏—è—Ö
                if (post.attachments && post.attachments.length > 0) {
                    const photo = post.attachments.find(a => a.type === 'photo');
                    if (photo) {
                        // –ë–µ—Ä–µ–º –∫–∞—Ä—Ç–∏–Ω–∫—É —Å—Ä–µ–¥–Ω–µ–≥–æ —Ä–∞–∑–º–µ—Ä–∞
                        const sizes = photo.photo.sizes;
                        const mediumSize = sizes.find(s => s.type === 'x') || sizes[sizes.length - 1];
                        imageUrl = mediumSize.url;
                    }
                }
                
                // –§–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –¥–∞—Ç—É
                const date = new Date(post.date * 1000);
                const dateStr = date.toLocaleDateString('ru-RU', {
                    day: 'numeric',
                    month: 'long',
                    year: 'numeric'
                });
                
                html += `
                    <div class="post">
                        ${postText ? `<div class="post-text">${postText}</div>` : ''}
                        ${imageUrl ? `<img src="${imageUrl}" class="post-image" alt="–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ">` : ''}
                        <div class="post-date">üìÖ ${dateStr}</div>
                    </div>
                `;
            });
            
            container.innerHTML = html || '<div class="error">–ù–µ—Ç –Ω–æ–≤–æ—Å—Ç–µ–π –¥–ª—è –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è</div>';
        }
        
        // –ó–∞–≥—Ä—É–∂–∞–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        window.onload = loadNews;
        
        // –û–±–Ω–æ–≤–ª—è–µ–º –Ω–æ–≤–æ—Å—Ç–∏ –∫–∞–∂–¥—ã–µ 5 –º–∏–Ω—É—Ç
        setInterval(loadNews, 300000);
    </script>
</body>
</html>
